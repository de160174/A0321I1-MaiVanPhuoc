<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="/css/bootstrap.css" type="text/css" rel="stylesheet">
</head>
<body>
<div id="list">
    <h3 th:text="${message}" style="color: red"></h3>
    <div>
        <input type="search" id="search" placeholder="Enter Name blog...">
        <button type="submit" id="submitSearch">Search</button>
    </div>
    <a href="/create" class="btn btn-success">Create Blog</a>
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">Blog ID</th>
                <th scope="col">Blog Name</th>
                <th scope="col">Content</th>
                <th scope="col">Author</th>
                <th scope="col" colspan="3">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="blog:${blogs}">
                <td th:text="${blog.blogId}"></td>
                <td th:text="${blog.blogName}"></td>
                <td th:text="${blog.content}"></td>
                <td th:text="${blog.author}"></td>
                <td><a th:href="@{/detail/{id}(id=${blog.blogId})}" class="btn btn-info">Detail</a></td>
                <td><a class="btn btn-secondary detailBtn">Detail ajax</a>
                    <input type="hidden" th:value="${blog.blogId}"/>
                </td>
                <td><a th:href="@{/edit/__${blog.blogId}__}" class="btn btn-primary">Edit</a></td>
                <td><a th:href="@{/delete/{id}(id=${blog.blogId})}" onclick="return confirm('Are you sure to delete?')"
                       class="btn btn-danger">Delete</a></td>
            </tr>
        </tbody>
    </table>
    <a class="btn btn-primary" th:href="@{'/'(page=${blogs.number - 1})}" th:if="${blogs.hasPrevious()}">Previous</a>
    <span th:text="${blogs.number+1}"></span>/<span th:text="${blogs.totalPages}"></span>
    <a class="btn btn-primary" th:href="@{'/'(page=${blogs.number + 1})}" th:if="${blogs.hasNext()}">Next</a>
    <!-- Modal -->
    <div class="modal fade" id="idModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script type="text/javascript">
    $(document).ready(function () {
        $("#submitSearch").click(function () {
            let search=$("#search").val();
            $.ajax({
                url:"/search",
                type:"GET",
                data:{"name": search},
                dataType:"HTML",
                success:function (data) {
                    $("#list").html(data);
                }
            })
        })
    })

    $(".detailBtn").click(function () {
        let id=$(this).next().val();
        $.ajax({
            url: "/edit/"+id,
            type: "GET",
            dataType: "HTML",
            success: function (data) {
                $(".modal-body").html(data);
                $("#idModal").modal("show");
            }
        })
    })
</script>
<script src="/js/jquery-3.5.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</html>